<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>تحكم في توكنات ديسكورد</title>
  <style>
    body { background: #0d0d0d; color: #00ffcc; font-family: sans-serif; padding: 2rem; text-align: center; }
    textarea, input { width: 90%; padding: 10px; margin-bottom: 1rem; border-radius: 5px; border: 1px solid #00ffcc; background: #1a1a1a; color: #fff; }
    button { padding: 10px 20px; margin: 5px; background: #00ffcc; border: none; color: #000; font-weight: bold; border-radius: 5px; cursor: pointer; }
    button:hover { background: #00e6b8; }
  </style>
</head>
<body>

  <h1>🚀 إدارة توكنات ديسكورد</h1>

  <textarea id="tokenInput" placeholder="اكتب التوكنات هنا (كل توكن في سطر)"></textarea>
  <br>
  <button onclick="saveTokens()">💾 حفظ التوكنات</button>

  <hr style="margin: 2rem 0;">

  <h2>💬 إرسال رسالة إلى روم</h2>
  <input id="channelId" placeholder="اكتب Channel ID هنا">
  <textarea id="messageContent" placeholder="اكتب الرسالة هنا"></textarea>
  <button onclick="sendMessages()">📤 أرسل الرسائل</button>

  <hr style="margin: 2rem 0;">

  <h2>✏️ تغيير الاسم</h2>
  <input id="newUsername" placeholder="الاسم الجديد">
  <button onclick="changeUsername()">تحديث الاسم</button>

  <h2>📝 تغيير البايو</h2>
  <input id="newBio" placeholder="البايو الجديد">
  <button onclick="changeBio()">تحديث البايو</button>

  <script>
    function getTokens() {
      return document.getElementById('tokenInput').value.split('\n').map(t => t.trim()).filter(t => t);
    }

    function saveTokens() {
      const tokens = document.getElementById('tokenInput').value.trim();
      if (!tokens) return alert('🚫 لا يوجد توكنات!');
      const blob = new Blob([tokens], { type: 'text/plain' });
      const a = document.createElement('a');
      a.href = URL.createObjectURL(blob);
      a.download = 'tokens.txt';
      a.click();
    }

    async function sendMessages() {
      const tokens = getTokens();
      const channelId = document.getElementById('channelId').value.trim();
      const message = document.getElementById('messageContent').value;

      if (!channelId || !message) return alert('❌ املأ البيانات كاملة');

      for (const token of tokens) {
        try {
          await fetch(`https://discord.com/api/v9/channels/${channelId}/messages`, {
            method: 'POST',
            headers: {
              'Authorization': token,
              'Content-Type': 'application/json'
            },
            body: JSON.stringify({ content: message, tts: false })
          });
          console.log(`✅ رسالة مرسلة: ${token.slice(0, 20)}...`);
        } catch (err) {
          console.error(`❌ فشل إرسال: ${token.slice(0, 20)}...`);
        }
      }

      alert('🚀 انتهى الإرسال!');
    }

    async function changeUsername() {
      const tokens = getTokens();
      const newName = document.getElementById('newUsername').value.trim();
      if (!newName) return alert('❌ اكتب اسم جديد');

      for (const token of tokens) {
        try {
          await fetch('https://discord.com/api/v9/users/@me', {
            method: 'PATCH',
            headers: {
              'Authorization': token,
              'Content-Type': 'application/json'
            },
            body: JSON.stringify({ username: newName })
          });
          console.log(`✅ تم تغيير الاسم: ${token.slice(0, 20)}...`);
        } catch {
          console.error(`❌ فشل تغيير الاسم: ${token.slice(0, 20)}...`);
        }
      }

      alert('✅ انتهى تغيير الأسماء');
    }

    async function changeBio() {
      const tokens = getTokens();
      const newBio = document.getElementById('newBio').value;
      if (!newBio) return alert('❌ اكتب البايو الجديد');

      for (const token of tokens) {
        try {
          await fetch('https://discord.com/api/v9/users/@me/profile', {
            method: 'PATCH',
            headers: {
              'Authorization': token,
              'Content-Type': 'application/json'
            },
            body: JSON.stringify({ bio: newBio })
          });
          console.log(`✅ تم تغيير البايو: ${token.slice(0, 20)}...`);
        } catch {
          console.error(`❌ فشل تغيير البايو: ${token.slice(0, 20)}...`);
        }
      }

      alert('📄 انتهى تغيير البايو');
    }
  </script>

</body>
</html>
