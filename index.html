<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Token Control Panel</title>
  <style>
    body {
      background: #121212;
      color: #00ffe0;
      font-family: monospace;
      padding: 20px;
      text-align: center;
    }
    textarea, input {
      width: 90%;
      padding: 10px;
      margin: 10px 0;
      border: 1px solid #00ffe0;
      border-radius: 5px;
      background-color: #1e1e1e;
      color: #00ffe0;
    }
    button {
      background-color: #00ffe0;
      color: #000;
      border: none;
      padding: 10px 20px;
      margin: 5px 0;
      font-weight: bold;
      border-radius: 5px;
      cursor: pointer;
    }
    button:hover {
      background-color: #00c2a8;
    }
    .log {
      margin-top: 20px;
      background: #1e1e1e;
      border: 1px solid #00ffe0;
      padding: 10px;
      height: 300px;
      overflow-y: auto;
      text-align: left;
      white-space: pre-wrap;
    }
  </style>
</head>
<body>

  <h2>💎 Token Control Panel - الأسطوري</h2>

  <textarea id="tokensBox" placeholder="توكن في كل سطر..."></textarea>
  <input id="channelId" placeholder="🆔 ID الروم">
  <input id="inviteLink" placeholder="🔗 رابط الدعوة (مثل https://discord.gg/code)">
  <input id="spamMessage" placeholder="📩 رسالة السبام">
  <input id="spamCount" type="number" placeholder="🔁 عدد الرسائل (للسبام)">

  <button onclick="checkTokens()">✅ فحص التوكنات</button>
  <button onclick="startAutoReaction()">🔁 Auto Reaction</button>
  <button onclick="startAutoGiveaway()">🎉 Auto Giveaway</button>
  <button onclick="joinViaInvite()">🔗 Auto Join</button>
  <button onclick="startSmartReply()">🧠 Smart Reply</button>
  <button onclick="startSpam()">📢 Spam Message</button>
  <button onclick="stopAll()">⛔ Stop All</button>

  <div class="log" id="logBox">📋 السجل سيظهر هنا...</div>

<script>
let autoInterval = null;
let replyIndex = 0;
let smartMessages = ["🔥 تمام", "👍 حلو", "😂 رهيب", "😎 جامد", "👑 ملك"];

function getTokens() {
  return document.getElementById('tokensBox').value.split('\n').map(t => t.trim()).filter(Boolean);
}

function log(msg) {
  const logBox = document.getElementById('logBox');
  logBox.innerText += `\n${new Date().toLocaleTimeString()} | ${msg}`;
  logBox.scrollTop = logBox.scrollHeight;
}

function stopAll() {
  clearInterval(autoInterval);
  autoInterval = null;
  log("🛑 تم إيقاف كل المهام.");
}

// ✅ Check Tokens
function checkTokens() {
  const tokens = getTokens();
  tokens.forEach(token => {
    fetch("https://discord.com/api/v10/users/@me", {
      headers: { Authorization: token }
    })
    .then(res => res.json().then(data => ({ status: res.status, data })))
    .then(({ status, data }) => {
      if (status === 200) {
        log(`✅ شغال: ${token.slice(0, 20)}... (${data.username}#${data.discriminator})`);
      } else {
        log(`❌ خربان: ${token.slice(0, 20)}...`);
      }
    })
    .catch(() => log(`❌ فشل التحقق من التوكن: ${token.slice(0, 20)}...`));
  });
}

// Auto Reaction
function startAutoReaction() {
  const tokens = getTokens();
  const channelId = document.getElementById('channelId').value.trim();
  if (!channelId) return alert("اكتب Channel ID");
  clearInterval(autoInterval);
  log("🚀 Auto Reaction بدأ");
  let lastId = null;

  autoInterval = setInterval(async () => {
    for (const token of tokens) {
      try {
        const res = await fetch(`https://discord.com/api/v10/channels/${channelId}/messages?limit=1`, {
          headers: { Authorization: token }
        });
        const msg = (await res.json())[0];
        if (msg && msg.id !== lastId) {
          lastId = msg.id;
          await fetch(`https://discord.com/api/v10/channels/${channelId}/messages/${msg.id}/reactions/%F0%9F%91%8D/@me`, {
            method: "PUT",
            headers: { Authorization: token }
          });
          log(`👍 React على ${msg.id}`);
        }
      } catch {
        log("❌ خطأ في Auto Reaction");
      }
    }
  }, 3000);
}

// Auto Giveaway
function startAutoGiveaway() {
  const tokens = getTokens();
  const channelId = document.getElementById('channelId').value.trim();
  if (!channelId) return alert("اكتب Channel ID");
  clearInterval(autoInterval);
  log("🎉 Auto Giveaway بدأ");
  let lastId = null;

  autoInterval = setInterval(async () => {
    for (const token of tokens) {
      try {
        const res = await fetch(`https://discord.com/api/v10/channels/${channelId}/messages?limit=1`, {
          headers: { Authorization: token }
        });
        const msg = (await res.json())[0];
        if (msg && msg.id !== lastId && (msg.content.includes("🎉") || msg.embeds?.some(e => e.title?.toLowerCase().includes("giveaway")))) {
          lastId = msg.id;
          await fetch(`https://discord.com/api/v10/channels/${channelId}/messages/${msg.id}/reactions/%F0%9F%8E%89/@me`, {
            method: "PUT",
            headers: { Authorization: token }
          });
          log(`🎉 انضم للقيف ${msg.id}`);
        }
      } catch {
        log("⚠️ خطأ في Auto Giveaway");
      }
    }
  }, 5000);
}

// Auto Join Server
function joinViaInvite() {
  const tokens = getTokens();
  const invite = document.getElementById("inviteLink").value.trim().split("/").pop();
  if (!invite) return alert("أدخل رابط دعوة!");
  for (const token of tokens) {
    fetch(`https://discord.com/api/v10/invites/${invite}`, {
      method: "POST",
      headers: { Authorization: token }
    }).then(res => {
      log(res.status === 200
        ? `✅ انضم ${token.slice(0, 20)}...`
        : `❌ فشل الانضمام ${token.slice(0, 20)}...`);
    }).catch(() => log("❌ فشل الاتصال بـ Discord"));
  }
}

// Smart Reply
function startSmartReply() {
  const tokens = getTokens();
  const channelId = document.getElementById("channelId").value.trim();
  if (!channelId) return alert("اكتب Channel ID");
  clearInterval(autoInterval);
  log("🧠 Smart Reply بدأ");
  let lastMsg = null;

  autoInterval = setInterval(async () => {
    for (const token of tokens) {
      try {
        const res = await fetch(`https://discord.com/api/v10/channels/${channelId}/messages?limit=1`, {
          headers: { Authorization: token }
        });
        const msg = (await res.json())[0];
        if (!msg || msg.id === lastMsg) continue;
        lastMsg = msg.id;
        const reply = smartMessages[replyIndex++ % smartMessages.length];
        await fetch(`https://discord.com/api/v10/channels/${channelId}/messages`, {
          method: "POST",
          headers: {
            "Authorization": token,
            "Content-Type": "application/json"
          },
          body: JSON.stringify({
            content: reply,
            message_reference: { message_id: msg.id }
          })
        });
        log(`💬 رد على ${msg.id}: ${reply}`);
      } catch {
        log("⚠️ خطأ في Smart Reply");
      }
    }
  }, 5000);
}

// Spam
function startSpam() {
  const tokens = getTokens();
  const channelId = document.getElementById('channelId').value.trim();
  const message = document.getElementById('spamMessage').value.trim();
  const count = parseInt(document.getElementById('spamCount').value);
  if (!channelId || !message || isNaN(count)) return alert("املأ كل الحقول");

  for (const token of tokens) {
    for (let i = 0; i < count; i++) {
      fetch(`https://discord.com/api/v10/channels/${channelId}/messages`, {
        method: "POST",
        headers: {
          Authorization: token,
          "Content-Type": "application/json"
        },
        body: JSON.stringify({ content: message })
      })
      .then(() => log(`📨 أرسل: ${message}`))
      .catch(() => log("❌ فشل الإرسال"));
    }
  }
}
</script>

</body>
</html>
