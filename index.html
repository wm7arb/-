<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8" />
  <title>CR Token Manager ğŸ’</title>
  <style>
    body {
      background: #0e0e0e;
      color: #00ffee;
      font-family: monospace;
      padding: 2rem;
      text-align: center;
    }
    textarea, input {
      width: 90%;
      background: #1c1c1c;
      color: #00ffee;
      border: 1px solid #00ffee;
      padding: 10px;
      margin-bottom: 1rem;
      border-radius: 6px;
    }
    button {
      background: #00ffee;
      color: #000;
      font-weight: bold;
      border: none;
      padding: 10px 20px;
      border-radius: 6px;
      cursor: pointer;
      margin: 0.5rem;
    }
    button:hover {
      background: #00ddcc;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 2rem;
    }
    th, td {
      border: 1px solid #00ffee;
      padding: 8px;
      text-align: center;
    }
    .valid { color: #00ff00; }
    .invalid { color: #ff3333; }
  </style>
</head>
<body>

  <h1>ğŸ‘‘ CR Token Manager</h1>

  <textarea id="tokensBox" placeholder="ØªÙˆÙƒÙ† ÙÙŠ ÙƒÙ„ Ø³Ø·Ø±..."></textarea><br>
  <input type="file" id="fileInput" onchange="importTokensFromFile()" /><br>
  <button onclick="verifyTokens()">âœ… ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØªÙˆÙƒÙ†Ø§Øª</button>
  <button onclick="downloadTokens()">ğŸ’¾ Ø­ÙØ¸ Ø§Ù„ØªÙˆÙƒÙ†Ø§Øª</button>

  <hr><h2>ğŸ“¤ Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø©</h2>
  <input id="channelId" placeholder="ğŸ†” Channel ID">
  <textarea id="msgContent" placeholder="Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ø³Ø§Ù„Ø©..."></textarea><br>
  <button onclick="sendToChannel()">ğŸ“© Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ø©</button>

  <hr><h2>ğŸ“ ØªØºÙŠÙŠØ± Ø§Ù„Ø§Ø³Ù… Ø£Ùˆ Ø§Ù„Ø¨Ø§ÙŠÙˆ</h2>
  <input id="newName" placeholder="Ø§Ø³Ù… Ø¬Ø¯ÙŠØ¯ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)">
  <input id="newBio" placeholder="Ø¨Ø§ÙŠÙˆ Ø¬Ø¯ÙŠØ¯ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)"><br>
  <button onclick="updateProfiles()">âœï¸ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª</button>

  <div id="results"></div>

  <script>
    function getTokens() {
      return document.getElementById('tokensBox').value.split('\n').map(t => t.trim()).filter(Boolean);
    }

    function downloadTokens() {
      const tokens = document.getElementById('tokensBox').value.trim();
      const blob = new Blob([tokens], { type: 'text/plain' });
      const link = document.createElement('a');
      link.href = URL.createObjectURL(blob);
      link.download = 'tokens.txt';
      link.click();
    }

    function importTokensFromFile() {
      const file = document.getElementById('fileInput').files[0];
      if (!file) return alert("âŒ Ù„Ù… ÙŠØªÙ… Ø§Ø®ØªÙŠØ§Ø± Ù…Ù„Ù");
      const reader = new FileReader();
      reader.onload = function(e) {
        document.getElementById('tokensBox').value = e.target.result;
      };
      reader.readAsText(file);
    }

    async function verifyTokens() {
      const tokens = getTokens();
      const resultsDiv = document.getElementById('results');
      resultsDiv.innerHTML = '<p>Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù‚Ù‚...</p>';

      let html = `<table><tr>
        <th>âœ… Ø§Ù„Ø­Ø§Ù„Ø©</th><th>ğŸ‘¤ Ø§Ù„Ø§Ø³Ù…</th><th>ID</th><th>ğŸ“§ Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„</th><th>ğŸ’ Nitro</th><th>ğŸ¯ Ø§Ù„ØªÙˆÙƒÙ†</th>
      </tr>`;

      for (const token of tokens) {
        try {
          const res = await fetch("https://discord.com/api/v9/users/@me", {
            headers: { Authorization: token }
          });
          if (!res.ok) throw new Error("Invalid");
          const data = await res.json();
          html += `<tr class="valid">
            <td>âœ…</td>
            <td>${data.username}#${data.discriminator}</td>
            <td>${data.id}</td>
            <td>${data.email || 'â€”'}</td>
            <td>${data.premium_type ? (data.premium_type === 2 ? "Full" : "Classic") : "None"}</td>
            <td>${token.slice(0, 30)}...</td>
          </tr>`;
        } catch (e) {
          html += `<tr class="invalid">
            <td>âŒ</td><td colspan="5">${token.slice(0, 30)}... ØºÙŠØ± ØµØ§Ù„Ø­</td>
          </tr>`;
        }
      }

      html += '</table>';
      resultsDiv.innerHTML = html;
    }

    async function sendToChannel() {
      const tokens = getTokens();
      const channelId = document.getElementById('channelId').value.trim();
      const message = document.getElementById('msgContent').value.trim();
      if (!channelId || !message) return alert("ğŸ›‘ Ø§Ù…Ù„Ø£ ÙƒÙ„ Ø§Ù„Ø­Ù‚ÙˆÙ„!");

      for (const token of tokens) {
        try {
          await fetch(`https://discord.com/api/v9/channels/${channelId}/messages`, {
            method: 'POST',
            headers: {
              Authorization: token,
              'Content-Type': 'application/json'
            },
            body: JSON.stringify({ content: message })
          });
          console.log(`âœ… Ø£ÙØ±Ø³Ù„Øª Ù…Ù†: ${token.slice(0,15)}...`);
        } catch (e) {
          console.warn(`âŒ ÙØ´Ù„ Ù…Ù†: ${token.slice(0,15)}...`);
        }
      }

      alert("ğŸš€ ØªÙ… Ø§Ù„Ø¥Ø±Ø³Ø§Ù„");
    }

    async function updateProfiles() {
      const tokens = getTokens();
      const newName = document.getElementById('newName').value.trim();
      const newBio = document.getElementById('newBio').value.trim();
      if (!newName && !newBio) return alert("ğŸ›‘ Ø§ÙƒØªØ¨ Ø§Ø³Ù… Ø£Ùˆ Ø¨Ø§ÙŠÙˆ Ø£ÙˆÙ„!");

      for (const token of tokens) {
        try {
          const res = await fetch("https://discord.com/api/v9/users/@me", {
            method: 'PATCH',
            headers: {
              Authorization: token,
              'Content-Type': 'application/json'
            },
            body: JSON.stringify({
              ...(newName && { username: newName }),
              ...(newBio && { bio: newBio })
            })
          });
          console.log(`âœ… ØªÙ… ØªØ­Ø¯ÙŠØ« Ù…Ù†: ${token.slice(0, 15)}...`);
        } catch (e) {
          console.warn(`âŒ ÙØ´Ù„ ØªØ­Ø¯ÙŠØ«: ${token.slice(0, 15)}...`);
        }
      }

      alert("âœï¸ ØªÙ… Ø§Ù„ØªØ­Ø¯ÙŠØ«");
    }
  </script>

</body>
</html>
